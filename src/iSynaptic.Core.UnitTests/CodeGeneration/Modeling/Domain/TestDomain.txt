using System;

namespace iSynaptic.TestDomain
{
    abstract value RoleIdentifier
    {
        String BaseIdentifier;
        String IdentifierType;
    }

    value CustomerRoleIdentifier : RoleIdentifier
    {
    }

    value CustomerAgentRoleIdentifier : RoleIdentifier
    {
    }

    value CustomerServiceRepresentativeRoleIdentifier : RoleIdentifier
    {
    }

    aggregate<T:*> Base { }

    aggregate<Guid> ServiceCase : Base
    {
        snapshot Snapshot
        {
            Int32 LastThreadId;
            CommunicationThreadSnapshot* ThreadSnapshots;
            String Title;
            String Description;
            ServiceCasePriority Priority;
        }

        event Opened
        {
            String Title;
            String Description;
            ServiceCasePriority Priority;
        }

        event CommunicationThreadStarted
        {
            Int32 ThreadId;
            String Topic;
            String Description;
        }

        event CommunicationRecorded
        {
            Int32 ThreadId;
            CommunicationDirection Direction;
            String Content;
            DateTime CommunicationTime;
        }
    }

    value CommunicationThreadSnapshot
    {
        Int32 ThreadId;
        String Topic;
        String Description;
    }

    enum CommunicationDirection
    {
        Incoming,
        Outgoing
    }

    enum ServiceCasePriority
    {
        Low,
        Normal,
        High
    }
}